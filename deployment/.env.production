# CP2B Backend - Production Environment Configuration
# Copy this file to /var/www/cp2b/backend/.env and update with your values

# ===========================================
# Database Configuration
# ===========================================
# Replace with the credentials from setup-postgres.sh
DATABASE_URL=postgres://cp2b:CHANGE_THIS_PASSWORD@localhost:5432/cp2b

# ===========================================
# Server Configuration
# ===========================================
PORT=3001
NODE_ENV=production

# ===========================================
# CORS Configuration
# ===========================================
# Set to your domain (without trailing slash)
FRONTEND_URL=https://your-domain.com

# For development/testing with localhost:
# FRONTEND_URL=http://localhost

# ===========================================
# File Upload Configuration
# ===========================================
UPLOAD_DIR=/var/www/cp2b/backend/uploads

# Maximum file size in bytes (default: 10MB)
MAX_FILE_SIZE=10485760

# Allowed file types (comma-separated)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf

# ===========================================
# Security Configuration
# ===========================================
# Generate a random secret (32+ characters recommended)
# Example: openssl rand -base64 32
SESSION_SECRET=GENERATE_RANDOM_SECRET_HERE_MINIMUM_32_CHARS

# JWT secret for token-based authentication (if used)
# Example: openssl rand -base64 32
JWT_SECRET=GENERATE_RANDOM_JWT_SECRET_HERE

# Session configuration
SESSION_MAX_AGE=86400000
# 86400000ms = 24 hours

# ===========================================
# Email Configuration (for contact forms)
# ===========================================
# SMTP settings - uncomment and configure if using email
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# EMAIL_FROM=noreply@your-domain.com
# EMAIL_TO=admin@your-domain.com

# ===========================================
# Logging Configuration
# ===========================================
LOG_LEVEL=info
# Options: error, warn, info, debug

# ===========================================
# API Rate Limiting
# ===========================================
# Rate limit window in milliseconds
RATE_LIMIT_WINDOW=900000
# 900000ms = 15 minutes

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# Database Connection Pool
# ===========================================
DB_POOL_MIN=2
DB_POOL_MAX=10

# ===========================================
# Production Optimizations
# ===========================================
# Enable compression
ENABLE_COMPRESSION=true

# Enable API caching (in seconds)
CACHE_TTL=300
# 300 seconds = 5 minutes

# ===========================================
# Monitoring & Health Checks
# ===========================================
# Health check endpoint enabled
HEALTH_CHECK_ENABLED=true

# ===========================================
# Feature Flags (optional)
# ===========================================
# ENABLE_ADMIN_PANEL=true
# ENABLE_ANALYTICS=false
# ENABLE_NOTIFICATIONS=false

# ===========================================
# External Services (if applicable)
# ===========================================
# Google Analytics ID
# GA_TRACKING_ID=UA-XXXXXXXXX-X

# Google reCAPTCHA keys (for contact form spam protection)
# RECAPTCHA_SITE_KEY=your-site-key
# RECAPTCHA_SECRET_KEY=your-secret-key

# ===========================================
# Backup Configuration (optional)
# ===========================================
# S3 bucket for backups (if using AWS)
# AWS_S3_BUCKET=cp2b-backups
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# ===========================================
# Notes
# ===========================================
# 1. Never commit this file with real credentials to git
# 2. Generate strong random secrets using: openssl rand -base64 32
# 3. Restrict file permissions: chmod 600 .env
# 4. Restart backend after changes: sudo systemctl restart cp2b-backend
# 5. Verify config: node -e "require('dotenv').config(); console.log(process.env.DATABASE_URL)"
